#pragma checksum "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\Pages\EliminarDosis.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "9b8eb56e6357a519bbc1163a6a882cbf7060d629"
// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace vac_master.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using vac_master;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using vac_master.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using ChartJs.Blazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using ChartJs.Blazor.Common;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using ChartJs.Blazor.Common.Axes;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using ChartJs.Blazor.Common.Axes.Ticks;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using ChartJs.Blazor.Common.Enums;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using ChartJs.Blazor.Common.Handlers;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using ChartJs.Blazor.Common.Time;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using ChartJs.Blazor.Util;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\_Imports.razor"
using ChartJs.Blazor.Interop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\Pages\EliminarDosis.razor"
using vac_master.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\Pages\EliminarDosis.razor"
using vac_master.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\Pages\EliminarDosis.razor"
using System.Linq;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\Pages\EliminarDosis.razor"
using Microsoft.AspNetCore.Server.Kestrel.Core;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/ElminarDosis")]
    public partial class EliminarDosis : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 100 "C:\Users\gt\Desktop\Vac-sys\vaccination-system\vac-master\Pages\EliminarDosis.razor"
       
    string _cedula;
    bool _sinRegistro;
    bool _conRegistro;
    bool preview = true;
    int _idDosis;
    string _message;
    covid19Context dtb = new covid19Context();
    Persona persona = new Persona();
    Dataprocess proc = new Dataprocess();
    readonly List<Vacunados> Dosis = new List<Vacunados>();


    public void Next()
    {
        var query = from persona in dtb.Persona
                    where persona.Cedula == _cedula
                    select persona;

        if (query.Count() == 0)
        {
            _sinRegistro = true;
            preview = false;
        }
        else if (query.Count() == 1)
        {
            _sinRegistro = false;
            preview = false;
            Persona registro = query.First();
            persona.Id = registro.Id;
            persona.Nombre = registro.Nombre;
            persona.Apellido = registro.Apellido;
            persona.Cedula = registro.Cedula;
            persona.Telefono = registro.Telefono;
            persona.FechaNac = registro.FechaNac;

            var vacunas = dtb.Vacunados.Where(vacunados => vacunados.IdPersona == persona.Id);
            foreach (var i in vacunas)
            {
                Dosis.Add(i);
            }
            _conRegistro = true;
        }
    }

    public void BorrarDosis()
    {
        try
        {
            _message = "";
            var registro = dtb.Vacunados.Where(vacunados => vacunados.Id == _idDosis);
            Vacunados encontrado = registro.First();
            proc.RemoveDosis(encontrado);
            _message = "Registro elminado con exito";
        }
        catch (Exception )
        {
            _message = "No se pudo eliminar el registro";
        }
    }

#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
